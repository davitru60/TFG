
<div class="project-admin">
    <div class="flex justify-center py-6">
      <div class="overflow-x-auto w-full max-w-6xl">
        <h1 class="text-2xl font-semibold mb-6">Categorías</h1>



        <div class="flex justify-end mb-4">
          <button type="button" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 focus:outline-none"
            (click)="openAddCategoryModal()">
            Añadir categoría
          </button>
        </div>



        <table class="min-w-full bg-white border border-gray-200 shadow-lg">
          <thead class="text-xs font-semibold text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400">
            <tr>
              <th class="py-4 px-6 border-b">ID</th>
              <th class="py-4 px-6 border-b">Name</th>
              <th class="py-4 px-6 border-b">Acciones</th>
            </tr>
          </thead>
          <tbody>
            @for(category of paginatedCategories; track category.category_id; let i=$index){
              <tr class="hover:bg-gray-50 even:bg-gray-100">
                <td class="py-4 px-6 border-b text-center">{{ category.category_id }}</td>
                <td class="py-4 px-6 border-b text-center"> {{ category.name }}</td>
                <td class="py-4 px-6 border-b text-center">
                  <button type="button" (click)="openEditCategoryModal(i)" class="mx-2 my-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Editar</button>
                
                </td>
              </tr>
            }
            
          </tbody>
        </table>
      </div>
    </div>

   
<app-pagination
[currentPage]="currentPage"
[totalPages]="totalPages"
(pageChange)="onPageChange($event)"
(itemsPerPageChange)="onItemsPerPageChange($event)"
></app-pagination>

</div>

<app-add-category [isModalOpen]="isAddCategoryModalOpen" (closeEvent)="closeAddCategoryModal()"></app-add-category>

@for(category of paginatedCategories; track category.category_id; let i=$index){
  <app-modal [isModalOpen]="isEditCategoryModalOpen[i]">
    <form #f="ngForm" (ngSubmit)="f.form.valid && updateProjectCategory(category.category_id)" novalidate>
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-bold text-gray-700">Editar categoría</h2>
        <button type="button" (click)="closeEditCategoryModal(i)" class="text-gray-600 hover:text-gray-900">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only">Cerrar modal</span>
        </button>
      </div>
  
      <div class="form-group mb-4">
        <label class="block text-gray-700 font-bold mb-2">Nombre del proyecto:</label>
        <input type="text"
          class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition duration-200 form-control"
          name="name" [(ngModel)]="category.name" required #name="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && name.errors }" />
  
      </div>
  
      <div class="form-group flex">
        <button type="submit"
          class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Actualizar</button>
      </div>
    </form>
  </app-modal>
}